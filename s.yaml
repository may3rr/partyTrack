edition: 1.0.0
name: party-track
access: default

services:
  party-track:
    component: fc
    props:
      region: cn-hangzhou
      service:
        name: party-track
        description: '党建助手应用'
        internetAccess: true
      function:
        name: party-track
        description: '党建助手主函数'
        runtime: python3.9
        codeUri: .
        handler: wsgi.app
        memorySize: 256
        timeout: 60
        environmentVariables:
          PYTHONPATH: /code
        layers:
          - acs:fc:cn-hangzhou:official:layers/Python39/versions/2
        customRuntimeConfig:
          command:
            - pip install -r requirements-fc.txt -t /code
            - python
      triggers:
        - name: httpTrigger
          type: http
          config:
            authType: anonymous
            methods:
              - GET
              - POST
      customDomains:
        - domainName: auto
          protocol: HTTP
          routeConfigs:
            - path: /* 